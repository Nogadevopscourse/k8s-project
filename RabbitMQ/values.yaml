# Default values for RabbitMQ.

## RabbitMQ authentication settings
auth:
  username: myuser
  password: mypassword

# RabbitMQ service settings
service:
  type: ClusterIP         # Expose RabbitMQ using ClusterIP service
  port: 5672              # Port for RabbitMQ
  managementPort: 15672   # Port for RabbitMQ Management Console

# Set this to true to enable the management plugin
management:
  enabled: true

# Resources requests and limits
resources:
  requests:
    memory: "512Mi"
    cpu: "500m"
  limits:
    memory: "1Gi"
    cpu: "1"

# RabbitMQ persistence settings
persistence:
  enabled: true
  storageClass: "standard"  # or your storage class name
  accessModes:
    - ReadWriteOnce
  size: 8Gi

# Replica settings
replicaCount: 1

# Enable or disable RabbitMQ cluster
cluster:
  enabled: false

metrics:
  enabled: true
  image:
    repository: kbudde/rabbitmq-exporter
    tag: v0.36.0  # You can specify the version
    pullPolicy: IfNotPresent

  serviceMonitor:
    enabled: true
    interval: 10s  # Scrape interval
    scrapeTimeout: 10s
    namespace: default  # Use the namespace where your monitoring tools are deployed
    labels:
      release: prometheus  # Change this to match your Prometheus release name

  prometheusRule:
    enabled: true
    rules:
      - alert: RabbitMQDown
        expr: up{job="rabbitmq"} == 0
        for: 5m
        labels:
          severity: critical
        annotations:
          description: "RabbitMQ instance is down"
          summary: "RabbitMQ is down"
